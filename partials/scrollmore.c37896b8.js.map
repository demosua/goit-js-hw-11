{"mappings":"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","sources":["src/js/scroll.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport Notiflix from \"notiflix\";\nimport axios from \"axios\";\nimport debounce from 'lodash.debounce';\n\nNotiflix.Notify.init({\n    width: '280px',\n    position: 'center-top',\n    distance: '54px',\n    timeout: 1000,\n    clickToClose: true,\n});\n\nAPI_KEY_PIXABAY = \"34930678-f4d511ae74090860518da87d0\";\nlet page = 1;\nlet query = '';\n\nconst refs = {\n    gallery: document.querySelector(\".gallery-scroll\"),\n    form: document.querySelector('#search-form'),\n    inputQuery: document.forms[0].elements.searchQuery,\n    loadmoreBtn: document.querySelector(\".load-more\"),\n};\n\nrefs.loadmoreBtn.classList.add('is-hidden');\nrefs.loadmoreBtn.addEventListener('click', onLoadClick);\nrefs.form.addEventListener('submit', onSubmitClick);\nrefs.inputQuery.addEventListener('input', debounce(onInputChange, 500));\n\nfunction onInputChange(e) {\n    page = 1;\n    refs.loadmoreBtn.classList.add('is-hidden');\n}\n\nfunction onSubmitClick(e) {\n    e.preventDefault();\n\n    if (query !== refs.inputQuery.value) {\n        query = refs.inputQuery.value;\n        refs.gallery.innerHTML = \"\";\n        getImages(query, page).then(renderGallery).then(showTotalHits);\n        return;\n    }\n\n    query = refs.inputQuery.value;\n    if (!query) {\n        Notiflix.Notify.info(\"Please, enter some text.\");\n        return;\n    }\n}\n\nfunction showError({ data, totalHits }) {\n    if (noData(data)) {\n        Notiflix.Notify.failure(`We're sorry, but you've reached the end of search results.`);\n        return;\n    };\n}\n\nfunction showTotalHits({ data, totalHits }) {\n    if (noData(data)) {\n        Notiflix.Notify.failure(\"Sorry, there are no images matching your search query. Please try again.\");\n        return;\n    };\n    if (totalHits) {\n        Notiflix.Notify.success(`Hooray! We found ${totalHits} images.`);\n        setTimeout(() => {\n            refs.loadmoreBtn.classList.remove('is-hidden');\n        }, 500);\n    }\n}\n\nfunction scrollSmoothly() {\n    const { height: cardHeight } = document.querySelector(\".gallery-scroll\").firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n    });\n}\n\nfunction onLoadClick() {\n    page += 1;\n    getImages(query, page).then(renderGallery).then(showError).catch(console.log);\n}\n\nfunction renderGallery({ data, totalHits }) {\n    const markup = createMarkup(data);\n    refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n    const gallery = new SimpleLightbox('.gallery-scroll a');\n    scrollSmoothly();\n    return { data, totalHits };\n}\n\nfunction noData(data) {\n    if(data.length === 0) {\n        return true;\n    }\n    return false;\n}\n\nfunction createMarkup(data) {\n    const markup = data.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<a class=\"photo-card-link\" href=\"${largeImageURL}\">\n        <div class=\"photo-card\">\n            <img class=\"photo-card-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n                <p class=\"info-item\">\n                <b>Likes</b>\n                <span>${likes.toLocaleString('uk')}</span>\n                </p>\n                <p class=\"info-item\">\n                <b>Views</b>\n                <span>${views.toLocaleString('uk')}</span>\n                </p>\n                <p class=\"info-item\">\n                <b>Comments</b>\n                <span>${comments.toLocaleString('uk')}</span>\n                </p>\n                <p class=\"info-item\">\n                <b>Downloads</b>\n                <span>${downloads.toLocaleString('uk')}</span>\n                </p>\n            </div>\n        </div> \n        </a>`\n    ).join('');\n    return markup;\n}\n\nasync function getImages(query, page) {\n    try {\n        const response = await axios.get(`/?key=${API_KEY_PIXABAY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=200&page=${page}`,  {\n            baseURL: 'https://pixabay.com/api',\n            transformResponse: [function (tempResponse) {\n                  const totalHits = JSON.parse(tempResponse).totalHits;\n                  const images = JSON.parse(tempResponse).hits;\n                  const data = [];\n                  for (const image of images) {\n                      \n                    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n                    data.push({ webformatURL, largeImageURL, tags, likes, views, comments, downloads });\n                      \n                }\n                return {data, totalHits};\n            }],\n        });\n         return response.data;\n    } catch (error) {\n    console.error(error);\n  }\n}\n\n\nfunction checkPosition() { \n    const height = document.body.offsetHeight\n    const screenHeight = window.innerHeight\n\n    const scrolled = window.scrollY\n    const threshold = height - screenHeight / 4\n    const position = scrolled + screenHeight\n    if (position >= threshold) {\n        \n    }\n}"],"names":["$bpxeT","parcelRequire","$parcel$interopDefault","$6JpON","Notify","init","width","position","distance","timeout","clickToClose","API_KEY_PIXABAY","$dd9e54e108f59881$var$page","$dd9e54e108f59881$var$query","$dd9e54e108f59881$var$refs","gallery","document","querySelector","form","inputQuery","forms","elements","searchQuery","loadmoreBtn","$dd9e54e108f59881$var$showError","param","data","totalHits","$dd9e54e108f59881$var$noData","failure","$dd9e54e108f59881$var$showTotalHits","success","concat","setTimeout","classList","remove","$dd9e54e108f59881$var$renderGallery","markup","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","toLocaleString","join","$dd9e54e108f59881$var$createMarkup","insertAdjacentHTML","cardHeight","$5IjG7","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","length","$dd9e54e108f59881$var$getImages","query1","page1","$dd9e54e108f59881$var$_getImages","apply","this","arguments","$2TvXO","mark","_callee","response","$dIxxU","default","get","baseURL","transformResponse","tempResponse","JSON","parse","images","hits","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","image","value","push","err","return","_ctx","sent","console","error","t0","add","addEventListener","then","catch","log","e","preventDefault","innerHTML","info","$l1Gdk"],"version":3,"file":"scrollmore.c37896b8.js.map"}