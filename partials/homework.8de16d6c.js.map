{"mappings":"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","sources":["src/js/index.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport Notiflix from \"notiflix\";\nimport axios from \"axios\";\nimport debounce from 'lodash.debounce';\n\nNotiflix.Notify.init({\n    width: '280px',\n    position: 'center-top',\n    distance: '54px',\n    timeout: 1000,\n    clickToClose: true,\n});\n\nAPI_KEY_PIXABAY = \"34930678-f4d511ae74090860518da87d0\";\nlet page = 1;\nlet query = '';\n\nconst refs = {\n    gallery: document.querySelector(\".gallery\"),\n    form: document.querySelector('#search-form'),\n    inputQuery: document.forms[0].elements.searchQuery,\n    loadmoreBtn: document.querySelector(\".load-more\"),\n};\n\nrefs.loadmoreBtn.classList.add('is-hidden');\nrefs.loadmoreBtn.addEventListener('click', onLoadClick);\nrefs.form.addEventListener('submit', onSubmitClick);\nrefs.inputQuery.addEventListener('input', debounce(onInputChange, 500));\n\nfunction onInputChange(e) {\n    page = 1;\n    refs.loadmoreBtn.classList.add('is-hidden');\n}\n\nfunction onSubmitClick(e) {\n    e.preventDefault();\n\n    if (query !== refs.inputQuery.value) {\n        query = refs.inputQuery.value;\n        refs.gallery.innerHTML = \"\";\n        getImages(query, page)\n        .then(renderGallery)\n        .then(showTotalHits)\n        .catch(showErrorNoImagesFound);\n        return;\n    }\n\n    query = refs.inputQuery.value;\n    if (!query) {\n        Notiflix.Notify.info(\"Please, enter some text.\");\n        return;\n    }\n}\n\nfunction onLoadClick() {\n    page += 1;\n    getImages(query, page)\n    .then(renderGallery)\n    .catch(showErrorImagesLimitReached);\n}\n\nfunction showErrorNoImagesFound() {\n    Notiflix.Notify.failure(`Sorry, there are no images matching your search query. Please try again.`);\n}\n\nfunction showErrorImagesLimitReached() {\n    Notiflix.Notify.failure(`We're sorry, but you've reached the end of search results.`);\n    refs.loadmoreBtn.classList.add('is-hidden');\n}\n\nfunction showTotalHits(totalHits) {\n    if (totalHits) {\n        Notiflix.Notify.success(`Hooray! We found ${totalHits} images.`);\n        setTimeout(() => {\n            refs.loadmoreBtn.classList.remove('is-hidden');\n        }, 500);\n    }\n}\n\nfunction renderGallery({ data, totalHits }) {\n    try {\n        if (totalHits === 0) {\n            showErrorNoImagesFound();\n            return;\n        }\n        if (data.length === 0) {\n            showErrorImagesLimitReached();\n            return;\n        }\n        const markup = createMarkup(data);\n        refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n        const gallery = new SimpleLightbox('.gallery a');\n        scrollSmoothly();\n        return totalHits;\n    }\n    catch(error) {\n        console.log(error);\n    }\n}\n\nasync function getImages(query, page) {\n    try {\n        const response = await axios.get(`/?key=${API_KEY_PIXABAY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=200&page=${page}`, {\n            baseURL: 'https://pixabay.com/api',\n            transformResponse: [function (tempResponse) {\n                const totalHits = JSON.parse(tempResponse).totalHits;\n                const images = JSON.parse(tempResponse).hits;\n                const data = [];\n                for (const image of images) {\n                      \n                    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n                    data.push({ webformatURL, largeImageURL, tags, likes, views, comments, downloads });\n                }\n                return { data, totalHits };\n            }],\n        });\n        return response.data;\n    } catch(error) {\n        console.error(error);\n    }\n}\n\nfunction createMarkup(data) {\n        const markup = data.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<a class=\"photo-card-link\" href=\"${largeImageURL}\">\n        <div class=\"photo-card\">\n            <img class=\"photo-card-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n                <p class=\"info-item\">\n                <b>Likes</b>\n                <span>${likes.toLocaleString('uk')}</span>\n                </p>\n                <p class=\"info-item\">\n                <b>Views</b>\n                <span>${views.toLocaleString('uk')}</span>\n                </p>\n                <p class=\"info-item\">\n                <b>Comments</b>\n                <span>${comments.toLocaleString('uk')}</span>\n                </p>\n                <p class=\"info-item\">\n                <b>Downloads</b>\n                <span>${downloads.toLocaleString('uk')}</span>\n                </p>\n            </div>\n        </div> \n        </a>`\n    ).join('');\n    \n    return markup;\n}\n\nfunction scrollSmoothly() {\n    const { height: cardHeight } = document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n    });\n}\n"],"names":["$fZKcF","parcelRequire","$parcel$interopDefault","$7Y9D8","Notify","init","width","position","distance","timeout","clickToClose","API_KEY_PIXABAY","$85a5f86b715fe7db$var$page","$85a5f86b715fe7db$var$query","$85a5f86b715fe7db$var$refs","gallery","document","querySelector","form","inputQuery","forms","elements","searchQuery","loadmoreBtn","$85a5f86b715fe7db$var$showErrorNoImagesFound","failure","$85a5f86b715fe7db$var$showErrorImagesLimitReached","classList","add","$85a5f86b715fe7db$var$showTotalHits","totalHits","success","setTimeout","remove","$85a5f86b715fe7db$var$renderGallery","data","length","markup","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","toLocaleString","join","$85a5f86b715fe7db$var$createMarkup","insertAdjacentHTML","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$85a5f86b715fe7db$var$scrollSmoothly","error","console","log","async","$85a5f86b715fe7db$var$getImages","query1","page1","$2shzp","default","get","baseURL","transformResponse","tempResponse","JSON","parse","images","hits","image","push","addEventListener","then","catch","e","preventDefault","value","innerHTML","info","$50Kfe"],"version":3,"file":"homework.8de16d6c.js.map"}