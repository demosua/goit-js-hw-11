{"mappings":"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","sources":["src/js/scroll.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport Notiflix from \"notiflix\";\nimport axios from \"axios\";\nimport debounce from 'lodash.debounce';\n\nNotiflix.Notify.init({\n    width: '280px',\n    position: 'center-top',\n    distance: '54px',\n    timeout: 1000,\n    clickToClose: true,\n});\n\nAPI_KEY_PIXABAY = \"34930678-f4d511ae74090860518da87d0\";\nlet page = 1;\nlet query = '';\n\nconst refs = {\n    gallery: document.querySelector(\".gallery-scroll\"),\n    form: document.querySelector('#search-form'),\n    inputQuery: document.forms[0].elements.searchQuery,\n    loadmoreBtn: document.querySelector(\".load-more\"),\n};\n\nrefs.loadmoreBtn.classList.add('is-hidden');\nrefs.loadmoreBtn.addEventListener('click', onLoadClick);\nrefs.form.addEventListener('submit', onSubmitClick);\nrefs.inputQuery.addEventListener('input', debounce(onInputChange, 500));\n\nfunction onInputChange(e) {\n    page = 1;\n    refs.loadmoreBtn.classList.add('is-hidden');\n}\n\nfunction onSubmitClick(e) {\n    e.preventDefault();\n\n    if (query !== refs.inputQuery.value) {\n        query = refs.inputQuery.value;\n        refs.gallery.innerHTML = \"\";\n        getImages(query, page).then(renderGallery).then(showTotalHits);\n        return;\n    }\n\n    query = refs.inputQuery.value;\n    if (!query) {\n        Notiflix.Notify.info(\"Please, enter some text.\");\n        return;\n    }\n}\n\nfunction showError({ data, totalHits }) {\n    if (noData(data)) {\n        Notiflix.Notify.failure(`We're sorry, but you've reached the end of search results.`);\n        return;\n    };\n}\n\nfunction showTotalHits({ data, totalHits }) {\n    if (noData(data)) {\n        Notiflix.Notify.failure(\"Sorry, there are no images matching your search query. Please try again.\");\n        return;\n    };\n    if (totalHits) {\n        Notiflix.Notify.success(`Hooray! We found ${totalHits} images.`);\n        setTimeout(() => {\n            refs.loadmoreBtn.classList.remove('is-hidden');\n        }, 500);\n    }\n}\n\nfunction scrollSmoothly() {\n    const { height: cardHeight } = document.querySelector(\".gallery-scroll\").firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n    });\n}\n\nfunction onLoadClick() {\n    page += 1;\n    getImages(query, page).then(renderGallery).then(showError).catch(console.log);\n}\n\nfunction renderGallery({ data, totalHits }) {\n    const markup = createMarkup(data);\n    refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n    const gallery = new SimpleLightbox('.gallery-scroll a');\n    scrollSmoothly();\n    return { data, totalHits };\n}\n\nfunction noData(data) {\n    if(data.length === 0) {\n        return true;\n    }\n    return false;\n}\n\nfunction createMarkup(data) {\n    const markup = data.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<a class=\"photo-card-link\" href=\"${largeImageURL}\">\n        <div class=\"photo-card\">\n            <img class=\"photo-card-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n                <p class=\"info-item\">\n                <b>Likes</b>\n                <span>${likes.toLocaleString('uk')}</span>\n                </p>\n                <p class=\"info-item\">\n                <b>Views</b>\n                <span>${views.toLocaleString('uk')}</span>\n                </p>\n                <p class=\"info-item\">\n                <b>Comments</b>\n                <span>${comments.toLocaleString('uk')}</span>\n                </p>\n                <p class=\"info-item\">\n                <b>Downloads</b>\n                <span>${downloads.toLocaleString('uk')}</span>\n                </p>\n            </div>\n        </div> \n        </a>`\n    ).join('');\n    return markup;\n}\n\nasync function getImages(query, page) {\n    try {\n        const response = await axios.get(`/?key=${API_KEY_PIXABAY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=200&page=${page}`,  {\n            baseURL: 'https://pixabay.com/api',\n            transformResponse: [function (tempResponse) {\n                  const totalHits = JSON.parse(tempResponse).totalHits;\n                  const images = JSON.parse(tempResponse).hits;\n                  const data = [];\n                  for (const image of images) {\n                      \n                    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n                    data.push({ webformatURL, largeImageURL, tags, likes, views, comments, downloads });\n                      \n                }\n                return {data, totalHits};\n            }],\n        });\n         return response.data;\n    } catch (error) {\n    console.error(error);\n  }\n}\n\n\nfunction checkPosition() { \n    const height = document.body.offsetHeight\n    const screenHeight = window.innerHeight\n\n    const scrolled = window.scrollY\n    const threshold = height - screenHeight / 4\n    const position = scrolled + screenHeight\n    if (position >= threshold) {\n        \n    }\n}"],"names":["$fZKcF","parcelRequire","$parcel$interopDefault","$7Y9D8","Notify","init","width","position","distance","timeout","clickToClose","API_KEY_PIXABAY","$22b277e67ad1df42$var$page","$22b277e67ad1df42$var$query","$22b277e67ad1df42$var$refs","gallery","document","querySelector","form","inputQuery","forms","elements","searchQuery","loadmoreBtn","$22b277e67ad1df42$var$showError","data","totalHits","$22b277e67ad1df42$var$noData","failure","$22b277e67ad1df42$var$showTotalHits","success","setTimeout","classList","remove","$22b277e67ad1df42$var$renderGallery","markup","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","toLocaleString","join","$22b277e67ad1df42$var$createMarkup","insertAdjacentHTML","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$22b277e67ad1df42$var$scrollSmoothly","length","async","$22b277e67ad1df42$var$getImages","query1","page1","$2shzp","default","get","baseURL","transformResponse","tempResponse","JSON","parse","images","hits","image","push","error","console","add","addEventListener","then","catch","log","e","preventDefault","value","innerHTML","info","$50Kfe"],"version":3,"file":"scrollmore.71e70b30.js.map"}