{"mappings":"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","sources":["src/js/index.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport Notiflix from \"notiflix\";\nimport axios from \"axios\";\nimport debounce from 'lodash.debounce';\n\nNotiflix.Notify.init({\n    width: '280px',\n    position: 'center-top',\n    distance: '54px',\n    timeout: 1000,\n    clickToClose: false,\n});\n\nconst API_KEY_PIXABAY = \"34930678-f4d511ae74090860518da87d0\";\nlet page = 1;\nlet query = '';\n\nconst refs = {\n    gallery: document.querySelector(\".gallery\"),\n    form: document.querySelector('#search-form'),\n    inputQuery: document.forms[0].elements.searchQuery,\n    loadmoreBtn: document.querySelector(\".load-more\"),\n};\n\nrefs.loadmoreBtn.classList.add('is-hidden');\nrefs.loadmoreBtn.addEventListener('click', onLoadClick);\nrefs.form.addEventListener('submit', onSubmitClick);\nrefs.inputQuery.addEventListener('input', debounce(onInputChange, 500));\n\nfunction onInputChange(e) {\n    page = 1;\n    refs.loadmoreBtn.classList.add('is-hidden');\n}\n\nfunction onSubmitClick(e) {\n    e.preventDefault();\n\n    if (query !== refs.inputQuery.value) {\n        query = refs.inputQuery.value;\n        refs.gallery.innerHTML = \"\";\n        getImages(query, page)\n        .then(renderGallery)\n        .then(showTotalHits)\n        .catch(showErrorNoImagesFound);\n        return;\n    }\n\n    query = refs.inputQuery.value;\n    if (!query) {\n        Notiflix.Notify.info(\"Please, enter some text.\");\n        return;\n    }\n}\n\nfunction onLoadClick() {\n    page += 1;\n    getImages(query, page)\n    .then(renderGallery)\n    .catch(showErrorImagesLimitReached);\n}\n\nfunction showErrorNoImagesFound() {\n    Notiflix.Notify.failure(`Sorry, there are no images matching your search query. Please try again.`);\n}\n\nfunction showErrorImagesLimitReached() {\n    Notiflix.Notify.failure(`We're sorry, but you've reached the end of search results.`);\n    refs.loadmoreBtn.classList.add('is-hidden');\n}\n\nfunction showTotalHits(totalHits) {\n    if (totalHits) {\n        Notiflix.Notify.success(`Hooray! We found ${totalHits} images.`);\n        setTimeout(() => {\n            refs.loadmoreBtn.classList.remove('is-hidden');\n        }, 500);\n    }\n}\n\nfunction renderGallery({ data, totalHits }) {\n    try {\n        if (totalHits === 0) {\n            showErrorNoImagesFound();\n            return;\n        }\n        if (data.length === 0) {\n            showErrorImagesLimitReached();\n            return;\n        }\n        const markup = createMarkup(data);\n        refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n        const gallery = new SimpleLightbox('.gallery a');\n        scrollSmoothly();\n        return totalHits;\n    }\n    catch(error) {\n        console.log(error);\n    }\n}\n\nasync function getImages(query, page) {\n    try {\n        const response = await axios.get(`/?key=${API_KEY_PIXABAY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`, {\n            baseURL: 'https://pixabay.com/api',\n            transformResponse: [function (tempResponse) {\n                const totalHits = JSON.parse(tempResponse).totalHits;\n                const images = JSON.parse(tempResponse).hits;\n                const data = [];\n                for (const image of images) {\n                      \n                    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n                    data.push({ webformatURL, largeImageURL, tags, likes, views, comments, downloads });\n                }\n                return { data, totalHits };\n            }],\n        });\n        return response.data;\n    } catch(error) {\n        console.error(error);\n    }\n}\n\nfunction createMarkup(data) {\n        const markup = data.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<a class=\"photo-card-link\" href=\"${largeImageURL}\">\n        <div class=\"photo-card\">\n            <img class=\"photo-card-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n                <p class=\"info-item\">\n                <b>Likes</b>\n                <span>${likes.toLocaleString('uk')}</span>\n                </p>\n                <p class=\"info-item\">\n                <b>Views</b>\n                <span>${views.toLocaleString('uk')}</span>\n                </p>\n                <p class=\"info-item\">\n                <b>Comments</b>\n                <span>${comments.toLocaleString('uk')}</span>\n                </p>\n                <p class=\"info-item\">\n                <b>Downloads</b>\n                <span>${downloads.toLocaleString('uk')}</span>\n                </p>\n            </div>\n        </div> \n        </a>`\n    ).join('');\n    \n    return markup;\n}\n\nfunction scrollSmoothly() {\n    const { height: cardHeight } = document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n    });\n}\n"],"names":["$bpxeT","parcelRequire","$parcel$interopDefault","$6JpON","Notify","init","width","position","distance","timeout","clickToClose","$44ae6d9db4eaca0f$var$API_KEY_PIXABAY","$44ae6d9db4eaca0f$var$page","$44ae6d9db4eaca0f$var$query","$44ae6d9db4eaca0f$var$refs","gallery","document","querySelector","form","inputQuery","forms","elements","searchQuery","loadmoreBtn","$44ae6d9db4eaca0f$var$showErrorNoImagesFound","failure","$44ae6d9db4eaca0f$var$showErrorImagesLimitReached","classList","add","$44ae6d9db4eaca0f$var$showTotalHits","totalHits","success","concat","setTimeout","remove","$44ae6d9db4eaca0f$var$renderGallery","param","cardHeight","data","length","markup","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","toLocaleString","join","$44ae6d9db4eaca0f$var$createMarkup","insertAdjacentHTML","$5IjG7","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","error","console","log","$44ae6d9db4eaca0f$var$getImages","query1","page1","$44ae6d9db4eaca0f$var$_getImages","apply","this","arguments","$2TvXO","mark","_callee","response","$dIxxU","default","get","baseURL","transformResponse","tempResponse","JSON","parse","images","hits","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","image","value","push","err","return","_ctx","sent","t0","addEventListener","then","catch","e","preventDefault","innerHTML","info","$l1Gdk"],"version":3,"file":"homework.dadd3311.js.map"}